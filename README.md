# News Generator

**News Generator** — это система автоматической генерации новостных статей на основе краткого описания события.  
Проект сочетает **экстракцию ключевых слов (YAKE)**, **генерацию текста (Llama 3.1)** и **создание заголовков (mT5)**, чтобы формировать готовую новость в формате JSON.

---

## Основные возможности

- **Извлекает ключевые слова** из входного текста при помощи YAKE  
- **Генерирует связную новостную статью** на основе события с встраиванием ключевых слов (через Ollama + Llama 3.1)  
- **Создаёт заголовок**, включающий ключевые слова, при помощи модели `mT5_multilingual_XLSum`  
- **Сохраняет результат** в удобном JSON-формате  

---

## Алгоритм работы

1. Чтение исходного текста (описание события)  
2. Извлечение ключевых слов с помощью **YAKE**  
3. Генерация текста статьи с использованием модели **Llama 3.1** через **Ollama API**  
4. Создание заголовка с использованием модели **mT5_multilingual_XLSum**  
5. Сохранение результата в JSON-файл  

---

## Структура проекта

```
project_root/
│
├── news_generator.py                # Основной скрипт генерации новостей
│
├── text_summarizer/
│   └── summarizer.py                # Модуль для чтения исходного текста
│
└── title_with_keywords/
    └── task2/
        ├── genai_title_with_keywords.py   # Логика генерации заголовков
```

---

## Требования

- Python 3.8+
- Установленный и запущенный [Ollama](https://ollama.ai/)
- Модель Llama 3.1 (или другая поддерживаемая модель) в Ollama

---

## Установка

  ```bash
  git clone --recurse-submodules https://github.com/Lijnx/News-Generator.git
  cd News-Generator
  pip install -r requirements.txt
  ```

---

## Аргументы командной строки

| Аргумент | Описание | По умолчанию |
|-----------|-----------|--------------|
| `--input` | Путь к файлу с описанием события | — |
| `--output` | Путь для сохранения JSON результата | — |
| `--lang` | Язык генерации (`ru` / `en`) | `ru` |
| `--num_keywords` | Кол-во ключевых слов | `6` |
| `--gen_model` | Модель Ollama для генерации статьи | `llama3.1` |
| `--temperature` | Креативность (0.0–1.0) | `0.7` |
| `--num_predict` | Макс. число токенов | `1000` |

---

## Пример использования

1. Создайте файл `event.txt` с описанием события:
   ```
   На саммите стран G20 лидеры обсудили меры по борьбе с изменением климата и ростом мировых цен на энергоносители.
   ```

2. Запустите генератор:
   ```bash
   python news_generator.py --input event.txt --output news.json --lang ru
   ```

3. Получите результат в `news.json`:
   ```json
   {
     "event": "На саммите стран G20 лидеры обсудили меры по борьбе с изменением климата и ростом мировых цен на энергоносители.",
     "title": "Лидеры G20 обсудили меры против роста цен на энергоносители",
     "article": "На саммите G20 в Индии главы ведущих экономик мира обсудили пути стабилизации цен на энергоносители и сокращение выбросов углерода. По словам участников, страны намерены усилить сотрудничество в сфере зеленой энергетики и инвестиций в устойчивые технологии."
   }
   ```

---

## Работа через Ollama API

Для корректной работы функции `ask_ollama()` требуется локальный сервер Ollama:

```bash
ollama serve
```

По умолчанию используется эндпоинт:

```
http://localhost:11434/api/generate
```
